<input type="file" id="fileInput">
<div id="output"></div>

<script src="pdf.js"></script>
<script>
  pdfjsLib.GlobalWorkerOptions.workerSrc = 'pdf.worker.min.js';
  const fileInput = document.getElementById("fileInput");
  const output = document.getElementById("output");

  fileInput.addEventListener("change", async e => {
    const file = e.target.files[0];
    if(!file) return;

    const reader = new FileReader();
    reader.onload = async () => {
      try {
        const pdf = await pdfjsLib.getDocument({data: new Uint8Array(reader.result)}).promise;
        output.innerHTML = ''; // vorherige Inhalte l√∂schen
        for(let i=1; i<=pdf.numPages; i++){
          const page = await pdf.getPage(i);
          const viewport = page.getViewport({scale: 1.2}); // Zoom
          const canvas = document.createElement('canvas');
          const ctx = canvas.getContext('2d');
          canvas.width = viewport.width;
          canvas.height = viewport.height;
          await page.render({canvasContext: ctx, viewport}).promise;
          output.appendChild(canvas);
        }
      } catch(err) {
        output.innerHTML = `<span style="color:red">${err.message}</span>`;
        console.error(err);
      }
    };
    reader.readAsArrayBuffer(file);
  });
</script>
